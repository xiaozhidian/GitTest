CREATE TABLE 图书  
(书号 CHAR(4) PRIMARY KEY,
 书名 CHAR(50)  NOT NULL  ,
 出版社 CHAR(30) NOT NULL,
 定价  MONEY  CHECK(定价>=0),
 作者 CHAR(10)NOT NULL) 
 on [PRIMARY]
 GO

CREATE TABLE 读者  
(编号 CHAR(4) PRIMARY KEY,
 姓名 CHAR(10) NOT NULL ,
 单位 CHAR(20) DEFAULT '信息工程学院',
 性别 CHAR(2), 
 年龄 CHAR(10)CHECK(年龄 BETWEEN 0 AND 100))
 on [PRIMARY]
 GO

 CREATE TABLE 职工  
(职工号 CHAR(4) PRIMARY KEY ,
 姓名 CHAR(10) NOT NULL ,
 性别 CHAR(2)CHECK(性别 IN ('男','女')), 
 职称 CHAR(10),
 领导 CHAR(4)  CONSTRAINT C1 FOREIGN KEY(领导) REFERENCES 职工(职工号) ,
 E_mail CHAR(50) NOT NULL)
 on [PRIMARY]
 GO




 CREATE TABLE 借阅  
(借阅号 BIGINT PRIMARY KEY IDENTITY(1,1),
 书号 CHAR(4) NOT NULL CONSTRAINT C2 FOREIGN KEY(书号) REFERENCES 图书(书号),
 读者编号 CHAR(4)NOT NULL CONSTRAINT C3 FOREIGN KEY(读者编号) REFERENCES 读者(编号), 
 借书时间 DATETIME NOT NULL ,
 还书时间 DATETIME ,
 迟还费 MONEY DEFAULT '0' ,
 损毁费 MONEY DEFAULT '0',
 应交费用 MONEY CHECK(应交费用='迟还费'+'损毁费'),
 经办人 CHAR(4) NOT NULL CONSTRAINT C4 FOREIGN KEY(经办人) REFERENCES 职工(职工号))
 on [Filegroup1]
 GO

 CREATE INDEX C1 ON 图书(书名) 
  CREATE INDEX C2 ON 图书(作者)
  CREATE INDEX C3 ON 读者(姓名)
  CREATE INDEX C4 ON 读者(性别)
  CREATE INDEX C5 ON 职工(姓名)
  CREATE INDEX C6 ON 借阅(书号)
  CREATE INDEX C7 ON 借阅(读者编号)
  GO